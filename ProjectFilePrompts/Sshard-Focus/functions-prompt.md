# Segment Prompt: functions.php

```
I'm working on a custom WordPress theme for an art portfolio. We're building it in segments.

This segment focuses on: functions.php

Project context:
- Custom theme with parallax scrolling effects
- Content blocks float over changing background images
- Custom image carousel that handles different aspect ratios
- Dynamic block generation based on media directory structure
- Need to manage thousands of images efficiently

Dependencies:
- Will include custom-post-types.php
- Will include template-functions.php
- Will include customizer.php
- Will include carousel-functions.php
- Will enqueue parallax-scroll.js, custom-carousel.js, dynamic-background.js, and navigation.js
- Will enqueue portfolio-theme-style.css, reset.css, responsive.css, and carousel.css

Requirements for this file:
1. Set up proper theme initialization
2. Include all necessary dependent files
3. Register and enqueue all scripts and styles with proper dependencies
4. Set up theme support for features (post thumbnails, custom logo, etc.)
5. Register navigation menus
6. Set up image sizes optimized for portfolio display
7. Add theme customization options
8. Include any necessary AJAX handlers
9. Set up proper template hierarchy
10. Add thumbnail regeneration support for imported images
11. Add theme security features
12. Configure proper media handling for large image collections

Please create the complete functions.php file with detailed comments.
```

This prompt provides guidance for creating the main functions file that ties together all aspects of the theme.
