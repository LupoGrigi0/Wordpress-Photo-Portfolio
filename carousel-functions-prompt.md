# Segment Prompt: carousel-functions.php

```
I'm working on a custom WordPress theme for an art portfolio. We're building it in segments.

This segment focuses on: carousel-functions.php

Project context:
- Custom theme with parallax scrolling effects
- Content blocks float over changing background images
- Custom image carousel that handles different aspect ratios
- Need to dynamically load images from specific directories
- Want smooth transitions between images with different aspect ratios
- Users need to navigate between images in fullscreen mode
- Need to support auto-play with customizable speed
- Looking to handle up to 20 images per carousel
- Need visual indicator when more images are available
- Optimizing for mobile and tablet viewing

Dependencies:
- Will use custom-post-types.php for portfolio item structure
- Will be used by carousel.php template part
- Will need to integrate with custom-carousel.js

Requirements for this file:
1. Create functions to scan and retrieve images from specified directories
2. Create a function to generate carousel HTML markup
3. Implement AJAX functionality for loading images dynamically
4. Add functions to handle different image aspect ratios
5. Create options for carousel settings (speed, transition type, etc.)
6. Include helper functions for image processing and optimization
7. Add functions for fullscreen navigation support
8. Implement functions for tracking current image position
9. Create functions to handle responsive behavior

Please create the complete carousel-functions.php file with detailed comments.
```

This prompt provides the context needed to create the carousel functionality that will address the limitations you found in commercial carousel options.
